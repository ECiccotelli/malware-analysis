import requests


def getReport(key, reportID):
    headers = {"Authorization": "Bearer " + key}

    REST_URL = "http://localhost:8090/tasks/report/" + str(reportID)

    session = requests.session()

    r = session.get(REST_URL, headers=headers)

    return r.content

#Enter authorization key from cuckoo.conf here
key = "key_here"



r = [1, 100] #Range of report ID's you want to get, integers
#Example: 1, 100 will get every report from cuckoo from ID 1 to ID 100

for i in range(r[0], r[1]):
    resp = getReport(key, i)
    pathToFolder = "/path/to/folder/here" #Edit this to the path of a directory you want the reports to be stored in
    f = open(pathToFolder + "/report" + str(i) + ".json", "w")
    f.write(resp)
    f.close()