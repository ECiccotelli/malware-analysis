import requests
import json
import glob
import os
import time

def submitReport(key, pathToFile, count):
    headers = {"Authorization": "Bearer " + key}
    REST_URL = "http://localhost:8090/tasks/create/file"

    files = {"file": ("Sample " + str(count), pathToFile)}
    r = requests.post(REST_URL, headers=headers, files=files)

    respJson = r.json()
    try:
        print("Successfully submitted with ID" + str(respJson['task_id']))
    except:
        print("Error submitting file " + str(pathToFile))


#Enter authorization key from cuckoo.conf here
key = "key_here"

count = 0
for file in glob.glob("PATH/TO/SAMPLES/*"): #Insert path in quotes then have /* to include all files. Can specify certain types of files, such as *.exe
    with open(file) as f:
        print("File " + str(f))
        submitReport(key, f, count)
        time.sleep(30)
        count+=1